{% load static %}
<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{{ title|default:"UniBot Console" }}</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <style>
      :root{
        --bg:#0f172a; --panel:#0b1324; --card:#111827; --muted:#94a3b8; --border:#1f2937;
      }
      html,body{height:100%}
      body{margin:0;background:var(--bg);color:#e2e8f0;font-family:system-ui,-apple-system,Segoe UI,Roboto}
      a{color:#60a5fa;text-decoration:none}
      .muted{color:var(--muted)}
      .topbar{
        position:sticky;top:0;z-index:40;background:var(--panel);
        border-bottom:1px solid var(--border);
      }
      .topbar-inner{
        display:flex;align-items:center;justify-content:space-between;
        padding:12px 18px;max-width:1400px;margin:auto;
      }
      .brand{
        display:flex;align-items:center;gap:10px;font-weight:700
      }
      .brand img{height:22px;width:auto;display:block}
      .layout{
        display:grid;grid-template-columns:1fr 280px;gap:0;max-width:1400px;margin:0 auto;
      }
      .content{padding:24px}
      aside.sidebar{
        position:sticky;top:53px;height:calc(100dvh - 53px);
        background:var(--panel);border-left:1px solid var(--border);padding:18px 16px;overflow:auto;
      }
      .menu-title{font-size:.82rem;letter-spacing:.2px;color:var(--muted);margin:8px 0 10px}
      .menu a{display:block;padding:10px 12px;border-radius:10px;color:#e2e8f0}
      .menu a[aria-current="page"], .menu a:hover{background:rgba(255,255,255,.06)}
      .cards{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px;margin-bottom:18px}
      .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:18px}
      .kpi{font-size:2.2rem;margin:6px 0 0}
      .table{width:100%;border-collapse:collapse}
      .table th,.table td{border-bottom:1px solid var(--border);padding:12px 10px}
      .table th{color:var(--muted);font-weight:600}
      @media (max-width: 1100px){ .layout{grid-template-columns:1fr} aside.sidebar{position:relative;top:0;height:auto;border-left:none;border-top:1px solid var(--border)} }
      @media (max-width: 900px){ .cards{grid-template-columns:1fr} }
    </style>
  </head>
  <body>

    <!-- Top Bar -->
    <header class="topbar">
      <div class="topbar-inner">
        <div class="brand">
          <img src="{% static 'custom_admin/img/unibot-logo.svg' %}" alt="UniBot">
          <span>UniBot Console</span>
        </div>
        <div>
          {% if request.user.is_authenticated %}
            <span class="muted">مرحبًا، {{ request.user.email|default:request.user.get_username }}</span>
            · <a href="/api/">API</a>
            · <a href="/admin/logout/">خروج</a>
          {% else %}
            <a href="/admin/login/">تسجيل الدخول</a>
          {% endif %}
        </div>
      </div>
    </header>

    <!-- Page Layout -->
    <div class="layout">

      <!-- Main content -->
      <main class="content">
        {% block content %}{% endblock %}
      </main>

      <!-- Sidebar -->
      {% include "custom_admin/_sidebar.html" %}
    </div>

  </body>
</html>

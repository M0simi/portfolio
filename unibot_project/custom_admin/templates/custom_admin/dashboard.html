{% extends "custom_admin/base.html" %}
{% block content %}
  <h2>لوحة التحكّم</h2>
  <p class="muted">نظرة سريعة على النظام.</p>

  <section class="grid grid-3">
    <div class="card">
      <h3>الأحداث</h3>
      <p style="font-size:2rem; margin:0">{{ stats.events_count }}</p>
      <small class="muted">إجمالي الأحداث</small>
    </div>
    <div class="card">
      <h3>الأسئلة الشائعة</h3>
      <p style="font-size:2rem; margin:0">{{ stats.faqs_count }}</p>
      <small class="muted">إجمالي الأسئلة</small>
    </div>
    <div class="card">
      <h3>المستخدمون</h3>
      <p style="font-size:2rem; margin:0">{{ stats.users_count }}</p>
      <small class="muted">إجمالي المستخدمين</small>
    </div>
  </section>

  <section class="grid grid-2" style="margin-top:20px">
    <div class="card">
      <h4>آخر 5 أحداث</h4>
      <ul>
        {% for e in latest_events %}
          <li>
            <strong>{{ e.title }}</strong>
            <div class="muted">{{ e.start_date }}{% if e.end_date %} → {{ e.end_date }}{% endif %}</div>
          </li>
        {% empty %}
          <li class="muted">لا توجد أحداث بعد.</li>
        {% endfor %}
      </ul>
    </div>
    <div class="card">
      <h4>آخر 5 أسئلة شائعة</h4>
      <ul>
        {% for f in latest_faqs %}
          <li>
            <strong>{{ f.question }}</strong>
            <div class="muted">{{ f.answer|truncatechars:80 }}</div>
          </li>
        {% empty %}
          <li class="muted">لا توجد أسئلة بعد.</li>
        {% endfor %}
      </ul>
    </div>
  </section>
{% endblock %}
